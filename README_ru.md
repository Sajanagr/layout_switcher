# layout_switcher
Keyboard Layout Switcher Script / Переключатель раскладки выделенного текста (простой аналог punto switcher, gxNeur)

Скрипт переключает раскладку выделенного текста при нажатии клавиши Scroll-Lock. (или Win) Раскладки только русская-латинская. Только выделенный текст. Только *перекодирует И изменяет раскладку для клавиатуры*, не изменяет последний введённый текст без выделения - эта функциональность слишком сложна и в punto и gxNeur реализована с проблемами.

Скрипт работает в фоновом режиме и будет перехватывать нажатие Pause/Break для выполнения операции переключения раскладки выделенного текста.

Теоретически скрипт работает в Gnome и KDE, но проверен только в KDE.

# Установка необходимых пакетов:

Для работы скрипта требуются права на управление клавиатурой и буфером обмена. В Linux может потребоваться установка дополнительных пакетов (xclip или xsel).

Перед использованием скрипта нужно установить необходимые Python-пакеты:

```bash
perl -m venv venv
source venv/bin/activate
pip install pyperclip pynput
python3 layout_switcher.py
```

Можно создать скрипт запуска:

```bash
#!/bin/bash

SCRIPT_DIR="$( cd  "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd $SCRIPT_DIR
#perl -m venv venv
source venv/bin/activate
#pip install pyperclip pynput
python3 layout_switcher.py
```

# Как использовать

* Сохраните скрипт в файл, например, layout_switcher.py

* Сделайте файл исполняемым: chmod +x layout_switcher.py

* Запустите скрипт: ./layout_switcher.py

Теперь при выделении текста и нажатии Pause/Break выделенный текст будет заменён на текст с переключенной раскладкой

# Автозапуск (не проверял)

Если вы хотите, чтобы скрипт запускался автоматически при входе в систему:

* Откройте "Автозагрузка" в настройках KUbuntu

* Добавьте новую задачу, указав путь к вашему скрипту

# Подробное описание библиотек

## pyperclip:

* pyperclip.copy(text) - копирует текст в буфер обмена
* pyperclip.paste() - возвращает содержимое буфера обмена

# Кроссплатформенная работа с буфером обмена

## pynput.keyboard:

* keyboard.Controller() - создает объект для эмуляции нажатий клавиш
* keyboard.Listener() - создает слушатель нажатий клавиш
* controller.press(key) - эмулирует нажатие клавиши
* controller.release(key) - эмулирует отпускание клавиши
* controller.tap(key) - эмулирует быстрое нажатие-отпускание

## time:

* time.sleep(seconds) - приостанавливает выполнение на указанное время

# Принцип работы скрипта:

* Сохраняет текущее содержимое буфера обмена
* Копирует выделенный текст (Ctrl+C)
* Конвертирует текст между раскладками
* Вставляет конвертированный текст (Ctrl+V)
* Восстанавливает исходное содержимое буфера обмена

Все операции выполняются за доли секунды


# PS

Написано с помощью deepseek.com
https://github.com/Pilat66/layout_switcher

